<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Resources - Sarasota Community Resource Hub</title>
  <link rel="icon" type="image/x-icon" href="assets/favicon.ico">
  <link rel="stylesheet" href="css/styles.css">
  <style>
    .resources-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 2rem;
      margin-top: 2rem;
    }

    .resource-item {
      background: white;
      border: 1px solid var(--border-color);
      border-radius: 0.75rem;
      padding: 1.5rem;
      box-shadow: 0 2px 8px rgba(255, 140, 0, 0.05);
      transition: all 0.3s ease;
    }

    .resource-item:hover {
      box-shadow: 0 8px 24px rgba(255, 140, 0, 0.15);
      transform: translateY(-4px);
    }

    .resource-item-header h3 {
      margin: 0 0 0.5rem 0;
      font-size: 1.2rem;
      color: var(--primary-color);
    }

    .resource-category {
      display: inline-block;
      background: var(--light-bg);
      color: var(--primary-color);
      padding: 0.25rem 0.75rem;
      border-radius: 1rem;
      font-size: 0.85rem;
      font-weight: 600;
      margin-bottom: 1rem;
    }

    .resource-item p {
      font-size: 0.95rem;
      color: var(--text-light);
      margin-bottom: 1rem;
      line-height: 1.5;
    }

    .resource-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin-bottom: 1rem;
    }

    .tag {
      background: #f0f0f0;
      color: var(--text-dark);
      padding: 0.25rem 0.5rem;
      border-radius: 0.25rem;
      font-size: 0.8rem;
    }

    .resource-info {
      border-top: 1px solid var(--border-color);
      padding-top: 1rem;
      margin-top: 1rem;
    }

    .info-row {
      display: flex;
      align-items: flex-start;
      gap: 0.75rem;
      margin-bottom: 0.75rem;
      font-size: 0.9rem;
    }

    .info-icon {
      min-width: 24px;
      font-size: 1.2rem;
    }

    .info-text a {
      color: var(--primary-color);
      text-decoration: none;
    }

    .info-text a:hover {
      text-decoration: underline;
    }

    @media (max-width: 768px) {
      .resources-grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <!-- Header & Navigation -->
  <header>
    <div class="header-content">
      <a href="index.html" class="logo-section">
        <img src="assets/favicon.ico" alt="Sarasota">
        <span>Sarasota Hub</span>
      </a>
      <nav id="main-nav">
        <a href="index.html" class="nav-link" data-page="home">Home</a>
        <a href="resources.html" class="nav-link active" data-page="resources">Resources</a>
        <a href="map.html" class="nav-link" data-page="map">Map</a>
        <a href="calendar.html" class="nav-link" data-page="calendar">Calendar</a>
        <a href="submit.html" class="nav-link" data-page="submit">Submit</a>
        <a href="about.html" class="nav-link" data-page="about">About</a>
      </nav>
      <button id="hamburger" class="hamburger" onclick="toggleMobileMenu()">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
  </header>

  <!-- RESOURCES PAGE -->
  <main style="padding-top: 2rem;">
    <div class="container">
      <div style="margin-bottom: 2rem;">
        <h1>Community Resources</h1>
        <p style="font-size: 1.1rem; color: var(--text-light);">Comprehensive directory of Sarasota community resources. Search and filter to find exactly what you need.</p>
      </div>

      <!-- Search & Filter -->
      <div class="search-filter-section" style="margin-bottom: 2rem;">
        <div class="search-filter-content">
          <div class="search-box">
            <label for="resourceSearch">Search Resources</label>
            <input type="text" id="resourceSearch" placeholder="Search by name, description, or keyword...">
          </div>
          <div class="filter-box">
            <label for="resourceCategory">Filter by Category</label>
            <select id="resourceCategory">
              <option value="">All Categories</option>
            </select>
          </div>
        </div>
      </div>

      <!-- Results count -->
      <div id="resultsCount" style="margin-bottom: 1.5rem; font-weight: 600; color: var(--text-light);"></div>

      <!-- Resources Grid -->
      <div class="resources-grid" id="resourcesGrid">
        <!-- Resources populated by JS -->
      </div>

      <!-- No results message -->
      <div id="noResults" style="display: none; text-align: center; padding: 3rem; color: var(--text-light);">
        <h3>No resources found</h3>
        <p>Try adjusting your search or filter criteria.</p>
      </div>
    </div>
  </main>

  <!-- Footer -->
  <footer>
    <div class="container">
      <div class="footer-content">
        <div class="footer-section">
          <h4>About Sarasota Hub</h4>
          <p>A comprehensive directory of community resources in Sarasota, Florida.</p>
        </div>
        <div class="footer-section">
          <h4>Quick Links</h4>
          <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="resources.html">Resources</a></li>
            <li><a href="map.html">Map</a></li>
            <li><a href="submit.html">Submit</a></li>
          </ul>
        </div>
        <div class="footer-section">
          <h4>Contact</h4>
          <p>Email: <a href="mailto:sarasotahub@gmail.com">sarasotahub@gmail.com</a></p>
        </div>
      </div>
      <div class="footer-bottom">
        <p>¬© 2026 Sarasota Community Resource Hub</p>
      </div>
    </div>
  </footer>

  <script src="js/resources-data.js"></script>
  <script>
    let filteredResources = [];

    function toggleMobileMenu() {
      const hamburger = document.getElementById('hamburger');
      const nav = document.getElementById('main-nav');
      if (hamburger) hamburger.classList.toggle('active');
      if (nav) nav.classList.toggle('active');
    }

    function getCategoryIcon(category) {
      const icons = {
        'Libraries': 'üìö', 'Healthcare': '‚öïÔ∏è', 'Shelters': 'üè†', 'Job Services': 'üíº',
        'Parks': 'üå≥', 'Transit': 'üöå', 'Food Services': 'üçΩÔ∏è', 'Youth Services': 'üë∂',
        'Senior Services': 'üë¥', 'Community Services': 'ü§ù', 'Education': 'üéì',
        'Legal Services': '‚öñÔ∏è', 'Support Services': 'üí™', 'Family Services': 'üë®‚Äçüë©‚Äçüëß‚Äçüë¶',
        'Beaches': 'üèñÔ∏è', 'Places to Go': 'üó∫Ô∏è', 'Things to Do': 'üéâ'
      };
      return icons[category] || 'üìå';
    }

    function displayResources(resources) {
      console.log('Displaying', resources.length, 'resources');
      
      const grid = document.getElementById('resourcesGrid');
      const noResults = document.getElementById('noResults');
      const resultsCount = document.getElementById('resultsCount');

      if (!grid) return;

      if (resources.length === 0) {
        grid.style.display = 'none';
        noResults.style.display = 'block';
        resultsCount.textContent = 'No resources found';
        return;
      }

      grid.style.display = 'grid';
      noResults.style.display = 'none';
      resultsCount.textContent = `Showing ${resources.length} resource${resources.length !== 1 ? 's' : ''}`;

      grid.innerHTML = resources.map(resource => `
        <div class="resource-item">
          <div class="resource-item-header">
            <h3>${resource.name}</h3>
          </div>
          <div class="resource-category">${getCategoryIcon(resource.category)} ${resource.category}</div>
          <p>${resource.description}</p>
          
          ${resource.tags && resource.tags.length > 0 ? `
            <div class="resource-tags">
              ${resource.tags.map(tag => `<span class="tag">${tag}</span>`).join('')}
            </div>
          ` : ''}
          
          <div class="resource-info">
            ${resource.address ? `
              <div class="info-row">
                <div class="info-icon">üìç</div>
                <div class="info-text">${resource.address}</div>
              </div>
            ` : ''}
            
            ${resource.phone ? `
              <div class="info-row">
                <div class="info-icon">üìû</div>
                <div class="info-text"><a href="tel:${resource.phone}">${resource.phone}</a></div>
              </div>
            ` : ''}
            
            ${resource.website ? `
              <div class="info-row">
                <div class="info-icon">üåê</div>
                <div class="info-text"><a href="${resource.website.startsWith('http') ? resource.website : 'https://' + resource.website}" target="_blank" rel="noopener noreferrer">Visit Website</a></div>
              </div>
            ` : ''}
            
            ${resource.hours ? `
              <div class="info-row">
                <div class="info-icon">üïê</div>
                <div class="info-text">${resource.hours}</div>
              </div>
            ` : ''}
          </div>

          ${resource.services && resource.services.length > 0 ? `
            <div style="margin-top: 1rem; padding-top: 1rem; border-top: 1px solid var(--border-color);">
              <strong style="font-size: 0.95rem;">Services:</strong>
              <ul style="list-style-position: inside; margin-top: 0.5rem; color: var(--text-light); font-size: 0.9rem;">
                ${resource.services.slice(0, 5).map(service => `<li>${service}</li>`).join('')}
                ${resource.services.length > 5 ? `<li>... and ${resource.services.length - 5} more</li>` : ''}
              </ul>
            </div>
          ` : ''}
        </div>
      `).join('');
    }

    function filterResources() {
      console.log('Filtering resources...');
      
      const searchTerm = document.getElementById('resourceSearch').value.toLowerCase();
      const category = document.getElementById('resourceCategory').value;

      filteredResources = resourcesDatabase.filter(resource => {
        const matchesSearch = !searchTerm || 
          resource.name.toLowerCase().includes(searchTerm) ||
          resource.description.toLowerCase().includes(searchTerm) ||
          resource.category.toLowerCase().includes(searchTerm) ||
          (resource.tags && resource.tags.some(tag => tag.toLowerCase().includes(searchTerm)));
        
        const matchesCategory = !category || resource.category === category;
        
        return matchesSearch && matchesCategory;
      });

      console.log('Filtered to', filteredResources.length, 'resources');
      displayResources(filteredResources);
    }

    function startInitialization() {
      if (!resourcesDatabase || resourcesDatabase.length === 0) {
        console.log('Data not loaded yet, retrying...');
        setTimeout(startInitialization, 100);
        return;
      }

      console.log('Data loaded:', resourcesDatabase.length, 'resources');
      
      filteredResources = [...resourcesDatabase];

      // Setup category dropdown
      const categorySelect = document.getElementById('resourceCategory');
      const categories = [...new Set(resourcesDatabase.map(r => r.category))].sort();
      categorySelect.innerHTML = '<option value="">All Categories</option>' + 
        categories.map(cat => `<option value="${cat}">${cat}</option>`).join('');

      // Setup event listeners
      document.getElementById('resourceSearch').addEventListener('input', filterResources);
      document.getElementById('resourceCategory').addEventListener('change', filterResources);

      // Check for URL category parameter
      const urlParams = new URLSearchParams(window.location.search);
      const categoryParam = urlParams.get('category');
      if (categoryParam) {
        categorySelect.value = categoryParam;
        filterResources();
      } else {
        // Display all resources initially
        displayResources(filteredResources);
      }
    }

    document.addEventListener('DOMContentLoaded', function() {
      console.log('DOM loaded, data available:', !!resourcesDatabase);
      setTimeout(startInitialization, 100);
    });
  </script>
</body>
</html>

